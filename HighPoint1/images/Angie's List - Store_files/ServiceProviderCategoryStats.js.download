'use strict';

define(function (require) {
  var AL = require('al');

  var Model = AL.Model.extend({});

  var Collection = AL.Collection.extend({
    model: Model,

    initialize: function initialize(models, options) {
      this.serviceProviderId = options.serviceProviderId;
    },

    url: function url() {
      var spId = this.serviceProviderId;
      var currentAddressId = AL.globals.attributes.currentAddress;
      var path = AL.apiPath + '/service_providers/' + spId + '/metrics';
      if (currentAddressId) {
        path += '?addressId=' + currentAddressId.attributes.addressId;
      }
      return path;
    },

    parse: function parse(response) {
      return response.categories;
    }
  });

  return {
    Model: Model,
    Collection: Collection
  };
});