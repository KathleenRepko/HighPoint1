define(function (require) {
  /* eslint no-var:0 */
  return {
    // This should be used instead of directly setting window.location
    // because it can be stubbed in tests, while the direct assignment can't.
    redirect: function (href, target) {
      if (href !== '#') {
        if (target) {
          window.open(href, '_blank');
        } else {
          window.location.href = href;
        }
      }
    },

    redirectToNewWindow: function (href) {
      window.open(href);
    },

    location: function () {
      return window.location;
    },

    // Setting cookies via AL so that it can be stubbed in tests
    setCookie: function (key, value) {
      window.document.cookie = key + '=' + value;
    },

    isMetaKeyEvent: function (event) {
      if (event.metaKey || event.altKey || event.ctrlKey || event.shiftKey) {
        return true;
      }
      // Logic that handles checks for the middle mouse button, based
      // on [jQuery](https://github.com/jquery/jquery/blob/master/src/event.js#L466).
      var which = event.which;
      var button = event.button;
      if (!which && button !== undefined) {
        return (!button & 1) && (!button & 2) && (button & 4);
      } else if (which === 2) {
        return true;
      }
      return false;
    }

  };
});
