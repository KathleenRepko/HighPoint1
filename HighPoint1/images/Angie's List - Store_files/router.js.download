define(function (require) {
  /* eslint no-var:0 */
  var $ = require('jquery');
  var Backbone = require('backbone');

  var pageRoutes = {
    account: {
      preferences: 'accountPreferences'
    },
    store: {
      ':serviceProviderId/:tab': 'storeTab',
      ':serviceProviderId/:tab/:category': 'storeTab'
    }
  };

  return {
    init: function (pageName, isMemberSite) {
      var Router = Backbone.Router.extend({routes: pageRoutes[pageName] || {}});
      var router = new Router();
      $(function () {
        var root = '/';
        if (pageName !== 'login') {
          root = root + pageName + '/';
        }
        if (isMemberSite) {
          root = '/member' + root;
        }
        Backbone.history.start({
          pushState: window.history && history.pushState,
          root: root
        });
      });
      return router;
    }
  };
});
